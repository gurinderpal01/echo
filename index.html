<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>HOOK – AI Hook Generator</title>
<style>
body { font-family: Arial, sans-serif; background: #0f0f0f; color: #fff; display: flex; justify-content: center; align-items: center; height: 100vh; margin:0; }
.app { width: 400px; background: #1c1c1c; padding: 20px; border-radius: 12px; }
h2 { text-align:center; }
textarea, input { width: 100%; border-radius: 8px; border: none; padding: 10px; font-size: 14px; margin-top:10px; }
button { width: 100%; padding: 12px; margin-top: 10px; border: none; border-radius: 8px; background: #ff4d4d; color: #fff; font-size: 16px; cursor: pointer; }
.hook { background: #2a2a2a; padding: 8px; border-radius: 6px; margin-top:6px; }
.hidden { display:none; }
.link-btn { background:#444; margin-top:5px; }
</style>
</head>
<body>

<div class="app">
<h2>HOOK</h2>

<!-- Step 1: Welcome -->
<div id="step1">
<p>Welcome to HOOK! To generate AI hooks, you need an OpenAI API key.</p>
<button onclick="showStep2()">Start Setup →</button>
</div>

<!-- Step 2: Guide to get API key -->
<div id="step2" class="hidden">
<p>1️⃣ Open your OpenAI Dashboard</p>
<p>2️⃣ Log in and click “Create new secret key”</p>
<p>3️⃣ Copy the key</p>
<button class="link-btn" onclick="window.open('https://platform.openai.com/account/api-keys','_blank')">Open OpenAI Dashboard</button>
<button onclick="showStep3()">Next →</button>
</div>

<!-- Step 3: Paste API key -->
<div id="step3" class="hidden">
<p>Paste your API key below:</p>
<input type="text" id="userKey" placeholder="sk-..." />
<button onclick="validateKey()">Validate Key</button>
<p id="keyStatus"></p>
</div>

<!-- Step 4: Hook generator -->
<div id="generator" class="hidden">
<textarea id="idea" placeholder="Enter your topic"></textarea>
<button onclick="generateHooks()">Generate Hooks</button>
<div id="hooks"></div>
</div>

</div>

<script>
function showStep2() {
document.getElementById("step1").classList.add("hidden");
document.getElementById("step2").classList.remove("hidden");
}

function showStep3() {
document.getElementById("step2").classList.add("hidden");
document.getElementById("step3").classList.remove("hidden");
}

// Check if user already has key saved
window.onload = () => {
const savedKey = localStorage.getItem("userKey");
if (savedKey) {
document.getElementById("step1").classList.add("hidden");
document.getElementById("generator").classList.remove("hidden");
}
};

// Validate key by making a small request
async function validateKey() {
const apiKey = document.getElementById("userKey").value.trim();
const status = document.getElementById("keyStatus");
if(!apiKey) { status.innerText="Enter a key"; return; }
status.innerText="Validating...";

try {
const res = await fetch("https://api.openai.com/v1/models", {
headers: { "Authorization": "Bearer " + apiKey }
});
if(res.status===200){
localStorage.setItem("userKey", apiKey);
status.innerText="✅ Key valid! Ready to generate hooks.";
// Show generator
document.getElementById("step3").classList.add("hidden");
document.getElementById("generator").classList.remove("hidden");
} else {
status.innerText="❌ Invalid key. Try again.";
}
} catch(e){
console.error(e);
status.innerText="❌ Error validating key. Check your internet or key.";
}
}

// Generate AI hooks
async function generateHooks() {
const apiKey = localStorage.getItem("userKey");
const idea = document.getElementById("idea").value.trim();
const hooksDiv = document.getElementById("hooks");
if(!idea){ hooksDiv.innerHTML="Enter a topic"; return; }
hooksDiv.innerHTML="Thinking...";

try {
const response = await fetch("https://api.openai.com/v1/responses", {
method:"POST",
headers:{ "Content-Type":"application/json", "Authorization":"Bearer "+apiKey },
body: JSON.stringify({
model:"gpt-4.1-mini",
input:`Generate 5 high-retention social media hooks for: ${idea}
Rules: one sentence each, short, punchy, no emojis.`
})
});
const data = await response.json();
const hooks = data.output_text ? data.output_text.split("\n").filter(l=>l.trim()) : [];
hooksDiv.innerHTML="";
if(hooks.length===0) hooksDiv.innerHTML="No hooks generated.";
hooks.forEach(h=>{
const div = document.createElement("div");
div.className="hook";
div.innerText=h.replace(/^\d+[\).\s]*/,"");
hooksDiv.appendChild(div);
});
} catch(e){
console.error(e);
hooksDiv.innerHTML="Error generating hooks.";
}
}
</script>

</body>
</html>